# Supabase Project Files - Git Guide

## âœ… Files TO COMMIT (Safe for Git)

### `functions/`
**What:** Edge Function code (TypeScript/JavaScript)
**Why:** Your serverless functions that run on Supabase
**Example:** `functions/submit-score/index.ts`

### `setup.sql`
**What:** Database schema and setup SQL
**Why:** Documents your database structure for team/deployment
**Example:** Table definitions, RLS policies, indexes

### `SETUP_INSTRUCTIONS.md` / `README.md`
**What:** Documentation files
**Why:** Helps others (and future you) understand the setup

### `migrations/` (if you create any)
**What:** Database migration files
**Why:** Version control for database schema changes
**Generated by:** `supabase db diff` or `supabase migration new`

### `config.toml` (if using local dev)
**What:** Local Supabase configuration
**Why:** Defines services, ports, and settings for local development
**Note:** Does NOT contain secrets - safe to commit

---

## âŒ Files TO IGNORE (Never Commit)

### `supabase/.temp/` âœ“ (now ignored)
**What:** CLI cache files (version info, project ref cache)
**Why:** Temporary data specific to your machine
**Contains:** `cli-latest`, `postgres-version`, `project-ref`, etc.

### `supabase/.branches/` âœ“ (now ignored)
**What:** Branch-specific temporary data
**Why:** Local branching metadata
**Used by:** Supabase branching feature

### `supabase/.build/` âœ“ (now ignored)
**What:** Build artifacts
**Why:** Temporary compilation outputs

### `.supabase/` âœ“ (now ignored)
**What:** Local development database files
**Why:** Contains actual database data when running `supabase start`
**Note:** Only appears if you use local Supabase development

### `.env` âœ“ (already ignored)
**What:** Environment variables and secrets
**Why:** Contains sensitive data (service_role key, etc.)
**Note:** `.env.example` CAN be committed (without actual secrets)

---

## ğŸ”‘ About Your Configuration Files

### `js/config/supabase-config.js` - SAFE TO COMMIT âœ“
Contains:
- Supabase URL (public)
- Anon/Public Key (public, designed for browsers)
- Edge Function URL (public)

**Why it's safe:**
- The anon key is **designed** to be exposed client-side
- Row Level Security (RLS) policies protect your database
- Only allows operations you've explicitly permitted via RLS

**Never commit:**
- Service Role Key (has admin access, bypasses RLS)
- Database password
- Secret API keys for other services

### `.env` - NEVER COMMIT âŒ
If you create one, it might contain:
- `SUPABASE_SERVICE_ROLE_KEY` - Full admin access
- `DATABASE_URL` - Direct database connection
- Other sensitive credentials

---

## ğŸ“‹ What Your `.gitignore` Now Includes

```gitignore
# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Supabase
supabase/.temp/
supabase/.branches/
supabase/.build/
.supabase/
```

---

## ğŸš€ Current Project Structure

```
supabase/
â”œâ”€â”€ .temp/              âŒ Ignored (CLI cache)
â”œâ”€â”€ functions/          âœ… Commit
â”‚   â””â”€â”€ submit-score/
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ setup.sql           âœ… Commit (database schema)
â”œâ”€â”€ SETUP_INSTRUCTIONS.md  âœ… Commit (docs)
â””â”€â”€ README.md           âœ… Commit (this file)
```

---

## ğŸ” Quick Check Commands

### Verify what will be committed:
```bash
git status
```

### Check if a specific file is ignored:
```bash
git check-ignore -v supabase/.temp/
```

### See all ignored files in a directory:
```bash
git status --ignored supabase/
```

---

## ğŸ’¡ Best Practices

1. **Never commit `.env`** - Use `.env.example` with placeholder values instead
2. **Always commit function code** - So your team can deploy
3. **Always commit SQL schemas** - Documents your database structure
4. **Ignore temp/cache folders** - They're machine-specific
5. **Anon key is safe** - It's designed for public use with RLS protection
6. **Service role key is NOT safe** - Never expose it client-side or in git

---

## â“ When in Doubt

**Public Repository?**
- Double-check no service_role keys are committed
- Review all config files before pushing

**Private Repository?**
- Still follow best practices
- Secrets in git history are hard to remove

**Not sure about a file?**
- Check if it contains passwords, tokens, or keys
- Check if it's machine-specific (paths, cache, temp data)
- When in doubt, ask or don't commit it yet

---

Your current setup is configured correctly! âœ…
